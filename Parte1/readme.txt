Para compilar:
gcc main.c -pthread

Para ejecutar:
./a.out N M

Donde N es la cantidad de hebras y M la cantidad de etapas